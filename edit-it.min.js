// Generated by CoffeeScript 1.8.0
$.fn.editit = function(event, options) {
  var $defaults, $selector, $settings, onChange;
  $defaults = {
    url: "",
    data: {}
  };
  $settings = $.extend($defaults, options);
  $selector = $(this).selector;
  onChange = function(input) {
    $.each($(input).parent().data(), function(key, value) {
      return $settings.data[key] = value;
    });
    $settings.data[$(input).attr("name")] = $(input).val();
    return $.post($settings.url, $settings.data);
  };
  $(document).on(event, $selector, function() {
    var $input;
    if ($($selector).find("input").length) {
      return;
    }
    $input = $("<input type=\"text\" value=\"" + ($(this).html()) + "\"\n    name=\"" + ($(this).data("name")) + "\">");
    $(this).html($input);
    $input.focus().select();
    return $input.on({
      focusout: function() {
        onChange(this);
        return $(this).closest($selector).html($input.val());
      },
      change: function() {
        onChange(this);
        return $(this).closest($selector).html($input.val());
      },
      keypress: function(e) {
        if (e.keyCode === 13) {
          onChange(this);
          return $(this).closest($selector).html($input.val());
        }
      }
    });
  });
  return this;
};
